/*
Legal Entity Management API

Testing TransferInstrumentsApiService

*/

// Code generated by OpenAPI Generator (https://openapi-generator.tech);

package legalentity

import (
	"context"
	openapiclient "github.com/adyen/adyen-go-api-library/v6/src/legalentity"
	"github.com/stretchr/testify/assert"
	"github.com/stretchr/testify/require"
	"net/http"
	"net/http/httptest"
	"testing"
)

func Test_LegalEntity_TransferInstrumentsApiService(t *testing.T) {

	var (
		username    = "n/a"
		password    = "n/a"
		env         = openapiclient.TestEnv
		mockServer  *httptest.Server
		mockRequest *http.Request
	)

	mockServer = httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
		mockRequest = r
	}))
	defer mockServer.Close()

	configuration, err := openapiclient.NewConfiguration(username, password, env)
	configuration.Servers = openapiclient.ServerConfigurations{
		{
			URL:         mockServer.URL,
			Description: "Mock Server",
		},
	}

	require.Nil(t, err, "Error creating Config object")
	apiClient := openapiclient.NewAPIClient(configuration)

	t.Run("Test TransferInstrumentsApiService DeleteTransferInstrument", func(t *testing.T) {

		apiClient.TransferInstrumentsApi.DeleteTransferInstrument(context.Background(), "123").Execute()

		assert.Equal(t, "DELETE", mockRequest.Method)
		assert.Equal(t, "/transferInstruments/123", mockRequest.URL.Path)
		assert.NotEmpty(t, mockRequest.Header.Get("Authorization"))

	})

	t.Run("Test TransferInstrumentsApiService GetTransferInstrument", func(t *testing.T) {

		apiClient.TransferInstrumentsApi.GetTransferInstrument(context.Background(), "123").Execute()

		assert.Equal(t, "GET", mockRequest.Method)
		assert.Equal(t, "/transferInstruments/123", mockRequest.URL.Path)
		assert.NotEmpty(t, mockRequest.Header.Get("Authorization"))

	})

	t.Run("Test TransferInstrumentsApiService UpdateTransferInstrument", func(t *testing.T) {

		apiClient.TransferInstrumentsApi.UpdateTransferInstrument(context.Background(), "123").Execute()

		assert.Equal(t, "PATCH", mockRequest.Method)
		assert.Equal(t, "/transferInstruments/123", mockRequest.URL.Path)
		assert.NotEmpty(t, mockRequest.Header.Get("Authorization"))

	})

	t.Run("Test TransferInstrumentsApiService CreateTransferInstrument", func(t *testing.T) {

		apiClient.TransferInstrumentsApi.CreateTransferInstrument(context.Background()).Execute()

		assert.Equal(t, "POST", mockRequest.Method)
		assert.Equal(t, "/transferInstruments", mockRequest.URL.Path)
		assert.NotEmpty(t, mockRequest.Header.Get("Authorization"))

	})

}
